# Licensed to the Apache Software Foundation (ASF) under one or more contributor license
# agreements. See the NOTICE file distributed with this work for additional information regarding
# copyright ownership. The ASF licenses this file to you under the Apache License, Version 2.0 (the
# "License"); you may not use this file except in compliance with the License. You may obtain a
# copy of the License at
#
#    http://www.apache.org/licenses/LICENSE-2.0
#
# Unless required by applicable law or agreed to in writing, software distributed under the License
# is distributed on an "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express
# or implied. See the License for the specific language governing permissions and limitations under
# the License.


language: java scala node_js

jdk:
  - oraclejdk8
scala:
  - 2.10.6
node_js:
  - "6"
git:
  quiet: true
cache:
  directories:
  - $HOME/.m2

install:
  - npm install -g bower

env:
  global:
    # The next declaration is the encrypted COVERITY_SCAN_TOKEN, created
    #   via the "travis encrypt" command using the project repo's public key
    - secure: "gbLUZ1HJEdC22r7wJQ5jwOOXdU+lZuGy1mm7sYOPeWio20vJrjChBkfCBiwVGZmsjKkMw0a+EiZPZw8yPJx7+tGEHIURMjHVgMm1YT3ZE31wEqxT10FgPMuVD7AMEbW5plDSc3sKPz00cmHPGXl5921zm0VwPEXJgWaG+suOE0pIsRIjmBdGX16dTIVVi/VvkIyR+dMIGnqaa7o+POoy8BFke6Vwg10YSjiBv6chMajPsEAX/0VNs55ATbhS8SBYuDAN8banyoFjYLsQzP5+O2qNNriX2D/ywGGCHhyZzUxvvMfdi9ZCbbPWJME8P8xqa2Id3hhMn12lt4XiB0waR5GI12FBRfY5TtT7tU/PRX40cg/TTaM23NfPSunIxk7eg8QHOCI80sEVDoi+K90mEatDqknjz5sPjKDvLmZZmsVvsSWcv2/Ky1BadDeqn7nfk1PStc/5Udr+IoKc3QZJ7+sXZ6LeRTs56Onxweivt/utyQur8r8GgQ2JEQGpMGF9jgm0ezBvTUw3SI/pe2JFv66YqT/2LiCS5jUg3AtKRW9X8+y3KWVDeetKVeNSeq47M/p9EHQnlWPKAbBcUUzM2fn+CI5BSv49jC+/1+/30hDhzx8cFkAbaSJ11Viij6t6uB6M5DqmXG/cW/Fx8Ll/oK5fHXD9/dkvP/c1cOvcdGo="

before_install:
  - echo -n | openssl s_client -connect scan.coverity.com:443 | sed -ne '/-BEGIN CERTIFICATE-/,/-END CERTIFICATE-/p' | sudo tee -a /etc/ssl/certs/ca-
  - printenv

addons:
  coverity_scan:
    project:
      name: "toyboxman/griffin"
      description: "<Your project description here>"
    notification_email: toyboxman0001@163.com
    build_command_prepend: "echo $COVERITY_SCAN_TOKEN"
    build_command: "mvn clean verify -q"
    branch_pattern: coverity_scan

# keep 30, need change according to ci logs.
script: travis_wait 30 mvn clean verify -q

